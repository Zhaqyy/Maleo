<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/mal.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Maleo Emballage</title>
  <!-- <script>
    window.onUsersnapLoad = function (api) {
      api.init();
    };
    var script = document.createElement('script');
    script.defer = 1;
    script.src = 'https://widget.usersnap.com/global/load/1d718cef-f8f4-4a4e-b2bb-94e43ce01c0f?onload=onUsersnapLoad';
    document.getElementsByTagName('head')[0].appendChild(script);
  </script> -->
  <script async src="https://tally.so/widgets/embed.js"></script>
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/pace-js@latest/pace.min.js" as="script" />

  <link rel="preload" href="/MonumentUltrabold.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/MonumentRegular.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/neue.woff2" as="font" type="font/woff2" crossorigin />


  <!-- <script src="https://cdn.jsdelivr.net/npm/pace-js@latest/pace.min.js"></script> -->

  <link rel="stylesheet" href="src/Components/preloader.css" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/src/service-worker.js')
        .then(function(registration) {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(function(error) {
          console.log('Service Worker registration failed:', error);
        });
    }
  </script>
  <script type="text/javascript" src="/src/service-worker.js"></script>

  </head>

<body>
  <div id="root"></div>
  <script>
    if (history.scrollRestoration) {
      history.scrollRestoration = "manual";
    }
  </script>
  <script>
    // Check if the homepage has been loaded before in this localStorage
    const isFirstLoad = localStorage.getItem('isFirstLoad_homepage');

    if (!isFirstLoad) {
      // Set localStorage storage to indicate that the homepage has been loaded
      localStorage.setItem('isFirstLoad_homepage', 'true');

      // Define paceOptions
      window.paceOptions = {
        startOnPageLoad: false,
        restartOnRequestAfter: false,
      };

      // Load Pace.js
      const paceScript = document.createElement('script');
      paceScript.src = 'https://cdn.jsdelivr.net/npm/pace-js@latest/pace.min.js';
      document.head.appendChild(paceScript);

      paceScript.onload = () => {
        // Pace event listeners
        Pace.on('progress', function (progress) {
          const paceProgressInner = document.querySelector('.pace-progress-inner');
          if (paceProgressInner) {
            paceProgressInner.style.width = `${progress}%`;
          }
        });

        Pace.on('done', function () {
          setTimeout(function () {
            const paceProgress = document.querySelector('.pace-progress');

            // Modify styles of the parent element which affects the pseudo-elements
            if (paceProgress) {
              paceProgress.style.setProperty('--progress-top', '-13px');
              paceProgress.style.setProperty('--progress-opacity', '0');
            }

            setTimeout(function () {
              if (paceProgress) {
                paceProgress.classList.add('translate-up');
              }
            }, 1500);
          }, 500);
        });

        // Start Pace manually
        Pace.start();
      };
    }
  </script>

  <script type="module" src="/src/main.jsx"></script>
</body>

</html>